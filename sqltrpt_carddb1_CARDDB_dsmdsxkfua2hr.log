SP2-0042: unknown command "ng off" - rest of line ignored.

DBMS_SQLTUNE.REPORT_TUNING_TASK(:TASK_NAME)
================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================
GENERAL INFORMATION SECTION
-------------------------------------------------------------------------------
Tuning Task Name   : TASK_213648
Tuning Task Owner  : DBASTEVE
Workload Type      : Single SQL Statement
Scope              : COMPREHENSIVE
Time Limit(seconds): 900
Completion Status  : COMPLETED
Started at         : 10/04/2017 11:26:28
Completed at       : 10/04/2017 11:37:40

-------------------------------------------------------------------------------
Schema Name: WISE
SQL ID     : dsmdsxkfua2hr
SQL Text   : select count(*) as "openCnt"    from wise.fcs_acct_register r
             where r.status=2     and r.confirm_time >= to_date(:1 ,
             'yyyy-mm-dd')     and r.confirm_time < to_date(:2 ,
             'yyyy-mm-dd') +1          and       r.app_id='FFAN'          and
                   r.fund_source='00'
Bind Variables :
 1 -  (VARCHAR2(128)):2017-10-03
 2 -  (VARCHAR2(128)):2017-10-03

-------------------------------------------------------------------------------
FINDINGS SECTION (2 findings)
-------------------------------------------------------------------------------

1- SQL Profile Finding (see explain plans section below)
--------------------------------------------------------
  为此语句找到了性能更好的执行计划。

  Recommendation (estimated benefit: 99.13%)
  ------------------------------------------
  - 考虑接受建议的 SQL 概要文件, 以便对此语句使用并行执行。
    execute dbms_sqltune.accept_sql_profile(task_name => 'TASK_213648',
            task_owner => 'DBASTEVE', replace => TRUE, profile_type =>
            DBMS_SQLTUNE.PX_PROFILE);

  与 DOP 128 并行执行此查询会使原始计划上的响应时间缩短 99.13%。但是, 启用并行执行时要付出一些代价。它将增加语句的资源消耗 (预计为
  11.01%), 这会导致系统吞吐量降低。此外, 由于在非常短的持续时间内消耗了这些资源, 因此如果没有足够可用的硬件容量,
  并发语句的响应时间将受到负面影响。

  The following data shows some sampled statistics for this SQL from the past
  week and projected weekly values when parallel execution is enabled.

                                 Past week sampled statistics for this SQL
                                 -----------------------------------------
  Number of executions                                                   0
  Percent of total activity                                              0
  Percent of samples with #Active Sessions > 2*CPU                       0
  Weekly DB time (in sec)                                                0

                              Projected statistics with Parallel Execution
                              --------------------------------------------
  Weekly DB time (in sec)                                                0

2- Index Finding (see explain plans section below)
--------------------------------------------------
  通过创建一个或多个索引可以改进此语句的执行计划。

  Recommendation (estimated benefit: 99.99%)
  ------------------------------------------
  - 考虑运行可以改进物理方案设计的访问指导或者创建推荐的索引。
    create index WISE.IDX$$_342900001 on WISE.FCS_ACCT_REGISTER("STATUS","FUND_
    SOURCE","APP_ID","CONFIRM_TIME");

  Rationale
  ---------
    创建推荐的索引可以显著地改进此语句的执行计划。但是, 使用典型的 SQL 工作量运行 "访问指导"
    可能比单个语句更可取。通过这种方法可以获得全面的索引建议案, 包括计算索引维护的开销和附加的空间消耗。

-------------------------------------------------------------------------------
EXPLAIN PLANS SECTION
-------------------------------------------------------------------------------

1- Original
-----------
Plan hash value: 2486950644

-----------------------------------------------------------------------------------------
| Id  | Operation           | Name              | Rows  | Bytes | Cost (%CPU)| Time     |
-----------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT    |                   |     1 |    14 |   840K  (1)| 02:48:07 |
|   1 |  SORT AGGREGATE     |                   |     1 |    14 |            |          |
|*  2 |   FILTER            |                   |       |       |            |          |
|*  3 |    TABLE ACCESS FULL| FCS_ACCT_REGISTER |     1 |    14 |   840K  (1)| 02:48:07 |
-----------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - filter(TO_DATE(:2,'yyyy-mm-dd')+1>TO_DATE(:1,'yyyy-mm-dd'))
   3 - filter("R"."APP_ID"='FFAN' AND "R"."STATUS"=2 AND "R"."FUND_SOURCE"='00'
              AND "R"."CONFIRM_TIME">=TO_DATE(:1,'yyyy-mm-dd') AND
              "R"."CONFIRM_TIME"<TO_DATE(:2,'yyyy-mm-dd')+1)

2- Using New Indices
--------------------
Plan hash value: 230742448

--------------------------------------------------------------------------------------
| Id  | Operation          | Name            | Rows  | Bytes | Cost (%CPU)| Time     |
--------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT   |                 |     1 |    14 |     1   (0)| 00:00:01 |
|   1 |  SORT AGGREGATE    |                 |     1 |    14 |            |          |
|*  2 |   FILTER           |                 |       |       |            |          |
|*  3 |    INDEX RANGE SCAN| IDX$$_342900001 |     1 |    14 |     1   (0)| 00:00:01 |
--------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - filter(TO_DATE(:2,'yyyy-mm-dd')+1>TO_DATE(:1,'yyyy-mm-dd'))
   3 - access("R"."STATUS"=2 AND "R"."FUND_SOURCE"='00' AND
              "R"."APP_ID"='FFAN' AND "R"."CONFIRM_TIME">=TO_DATE(:1,'yyyy-mm-dd') AND
              "R"."CONFIRM_TIME"<TO_DATE(:2,'yyyy-mm-dd')+1)

3- Using Parallel Execution
---------------------------
Plan hash value: 3662585342

--------------------------------------------------------------------------------------------------------------------------
| Id  | Operation               | Name              | Rows  | Bytes | Cost (%CPU)| Time     |    TQ  |IN-OUT| PQ Distrib |
--------------------------------------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT        |                   |     1 |    14 |  7290   (1)| 00:01:28 |        |      |            |
|   1 |  SORT AGGREGATE         |                   |     1 |    14 |            |          |        |      |            |
|*  2 |   PX COORDINATOR        |                   |       |       |            |          |        |      |            |
|   3 |    PX SEND QC (RANDOM)  | :TQ10000          |     1 |    14 |            |          |  Q1,00 | P->S | QC (RAND)  |
|   4 |     SORT AGGREGATE      |                   |     1 |    14 |            |          |  Q1,00 | PCWP |            |
|*  5 |      FILTER             |                   |       |       |            |          |  Q1,00 | PCWC |            |
|   6 |       PX BLOCK ITERATOR |                   |     1 |    14 |  7290   (1)| 00:01:28 |  Q1,00 | PCWC |            |
|*  7 |        TABLE ACCESS FULL| FCS_ACCT_REGISTER |     1 |    14 |  7290   (1)| 00:01:28 |  Q1,00 | PCWP |            |
--------------------------------------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - filter(TO_DATE(:2,'yyyy-mm-dd')+1>TO_DATE(:1,'yyyy-mm-dd'))
   5 - filter(TO_DATE(:2,'yyyy-mm-dd')+1>TO_DATE(:1,'yyyy-mm-dd'))
   7 - filter("R"."APP_ID"='FFAN' AND "R"."STATUS"=2 AND "R"."FUND_SOURCE"='00' AND
              "R"."CONFIRM_TIME">=TO_DATE(:1,'yyyy-mm-dd') AND "R"."CONFIRM_TIME"<TO_DATE(:2,'yyyy-mm-dd')+1)

-------------------------------------------------------------------------------


